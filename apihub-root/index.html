<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Anti-Counterfeiting Data Collaboration</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <script>var plEnvironment = (window.location.href && window.location.href.indexOf("localhost")>=0)
        ? ' localhost'
        : (window.location.href && window.location.href.indexOf("-dev.pharmaledger.")>=0)
        ? ' DEV'
        : '';
        document.title = document.title + plEnvironment;
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
</head>
<body>
    <noscript>
        <span style="font-weight: bold; color:red;">WARNING:</span> JavaScript is disabled! This site requires JavaScript!
    </noscript>
    <div class="center-aligned-controls vertical-align">

        <a class="dsu-fabric_button scale-up" href="dsu-fabric-wallet/loader/" target="_blank"/>
        <div class="left-side">
            <img src="assets/images/factory.png" alt="DSU-Fabric">
        </div>
        <div class="right-side">
            <p>Enterprise  Wallet</p>
        </div>
        </a>

        <a class="leaflet-wallet_button scale-up" href="leaflet-wallet/loader/" target="_blank">
            <div class="left-side">
                <img src="assets/images/patient.png" alt="Patient-app">
            </div>
            <div class="right-side">
                <p>Patient wallet</p>
            </div>
        </a>

        <a class="web-wallet_button scale-up" href="/backoffice" target="_blank">
            <div class="left-side">
                <img src="assets/images/pharmacy.png" alt="Backoffice-App">
            </div>
            <div class="right-side">
                <p>ACDC Demo</p>
            </div>
        </a>

        <a class="web-wallet_button scale-up" href="/borest/api" target="_blank">
            <div class="left-side">
                <img src="assets/images/data-center--v2.png" alt="Backoffice REST API">
            </div>
            <div class="right-side">
                <p>Backoffice Centralized REST</p>
            </div>
        </a>

        <a class="web-wallet_button scale-up" href="dsu-explorer/loader/" target="_blank">
            <div class="left-side">
                <img src="assets/images/cube.png" alt="DSU-Explorer">
            </div>
            <div class="right-side">
                <p>DSU Explorer</p>
            </div>
        </a>
    </div>
    <div>
        <h1><img src="assets/images/pharmaledgerLogo.png" alt="Pharmaledger" style="height: 2em; vertical-align: middle; margin-right: 1em;">Anti-Counterfeiting Data Collaboration
         Demo<script>document.write(plEnvironment);</script></h1>

        <p>Demonstration of Anti-Counterfeiting Data Collaboration, using blockchain - through
            <a href="http://opendsu.com" target="_blank">OpenDSU</a> technology.</p>

        <p>The <span style="font-style: italic;">Enterprise &amp; Patient Wallet</span> above (which are
         easily compiled to native mobile Android/iOS application) are Progressive Web Applications
         compatible with modern (>2016) mobile browsers.
         The <span style="font-style: italic;">Backoffice Centralized Application</span> is a regular web application,
         compatible with modern browsers (both desktop and mobile , >2016).
        </p>

        <div id="credentials" style="display: none;">
            <p>Below are the available Authentication Features SSIs::</p>
            <table id="credentials-table" style="width: 100%;">
                <tr>
                    <th></th>
                    <th>Marketing Authorization Holder</th>
                    <th>Wholesaler</th>
                    <th>Pharmacy</th>
                </tr>
                <tr>
                    <th>Id</th>
                    <td style="border-style: solid;" id="id-mah"></td>
                    <td style="border-style: solid;" id="id-whs"></td>
                    <td style="border-style: solid;" id="id-pha"></td>
                </tr>
                <tr style="word-break: break-all;">
                    <th>KeySSI</th>
                    <td style="border-style: solid;" id="key-mah"></td>
                    <td style="border-style: solid;" id="key-whs"></td>
                    <td style="border-style: solid;" id="key-pha"></td>
                </tr>
            </table>
        </div>

        <p>To integrate an Authentication Feature into a batch DSU, during it's creation check the 'Enable Authentication Feature' checkbox
         and enter the value for the Authentication Feature KeySSI (above);</p>
        <p>When Scanning this batch with the EPI app, you will see a message in orange informing you that an action is required to verify the pack.
        You can then click the 'Verify Pack' button. This will launch the authentication feature;</p>
        <p>You will see some details of the product can click the scan button. if you scan the same code as before,
            you will be sent back to the EPI app with a Sucess message. If you scan any other code, the message will be a failure.</p>

        <h2>0.7.0 - release notes 2021-10-26</h2>

        <p>Closed iOS demo data (not for PWA site-scans)</p>
        <ul>
            <li>Authentication feature 59k3<br>&nbsp;<br><img src="assets/images/2d-matrix/v0_7_0_59k3_12113100000018-SN43153146330837.png" style="background-color:white;"></li>
        </ul> 
        
        
        <i>Add publicly-accessible demonstration instructions here! (Replace and remove this note when finish)</i>
        <p style="font-style: italic;">Must have elements:</p>
        <ul>
            <li style="font-style: italic;">Picture of the data matrixes of the products to scan, along with expected authentication features and results.</li>
            <li style="font-style: italic;">Other explanatory notes (such as ePi preferences setup requirements, and how to access the ACDC Demonstrator to view remote scan reports.</li>
            <li style="font-style: italic;">(Internal for developers)TODO: Deployment of keySSI of the authentication features should be built into the acdc-workspace octopus (and later Dockerfile deployment). (keySSIs change on every build ? Probably yes!)</li>
            <li style="font-style: italic;">(Internal for developers)TODO: Provisioning of the authentication features selected for each batch should use the previously defined keySSI. Update mapping engine setup with those extra fields.</li>
        </ul>
        
        <h2>0.6.1 - release notes 2021-09-08</h2>
        <ul>
            <li>Added instructions for the Authentication features integration and testing</li>
            <li>Mobile:
                <ul>
                    <li>Demo page for the Native Camera API bug fixes;</li>
                </ul>
            </li>
        </ul>

        <h2>0.6.0 - release notes 2021-09-06</h2>
        <ul>
            <li>Integration of Authentication features in the Leaflet SSApp;</li>
            <li>Update of DSU fabric and the Mapping engine to handle a new Batch Property - Authentication feature SSI;</li>
            <li>Standardization of Native APIs (Camera in this case) for all environments, available for every SSApp launched</li>
            <li>Creation of Demo Authentication Feature SSApp;</li>
            <li>Implemented communication mechanism between Authentication feature SSApp and Parent SSApp;</li>
            <li>Implemented ACDC Reporting (when selected by user) for the Authentication Feature Scan Results;</li>
            <li>Mobile:
                <ul>
                    <li>Inclusion of TrueMed's Native Camera SDK and Alpvision's JS Wrapper in the project;</li>
                    <li>Integration of AlpVision JS Wrapper into the new Standard Camera API;</li>
                    <li>Environment Dependent Camera API deployment;</li>
                </ul>
            </li>
        </ul>

        <h2>v0.5.12 - Release notes 2021-07-19</h2>
        <ul>
            <li>Improvement of functional and visible elements.</li>
            <li>Changed event filter to work with multiple criteria, to matches a pattern or part/fragment of a text known to deeper investigation purpose</li>
            <li>Fixed the issue that was required login on new tabs</li>
            <li>Improvement of the user session to keep filter criteria while logged in</li>
            <li>Added geolocation accuracy as a circle on event map</li>
            <li>
                <p>Setting a custom location for ACDC Scan (only DESKTOP clients)</p>
                <span>
                    Some browsers allow you to set/share custom locations as your location (such as Chrome/Edge).
                    It is because on desktops the location is usually determined based on your IP address.
                    To set your location manually, do that <strong>(available only for laptop and desktop PCs):
                    <br><i>*latest browser version required</i></strong>
                </span>
                <ol>
                    <li>
                        On the page that wants your location, open the developer console — <strong><i>ctrl+shift+i or F12</i></strong> (on WindowsOS)
                        / <strong><i>cmd+option+i</i></strong> (on macOS)
                    </li>
                    <li>
                        At the top of the panel, press the three-dot button on the right
                    </li>
                    <img src="assets/images/custom-location/open-console.png">
                    <li>Select <strong><i>"More tools"</i></strong> and then click the <strong><i>"Sensors"</i></strong> option</li>

                    <li>Under Location, select <strong><i>"Custom location/Other"</i></strong></li>
                    <li>Place the desired location based on latitude and longitude</li>
                    <img src="assets/images/custom-location/set-location.png">
                    <li>Besides custom location, are available pre-settled locations that can be selected</li>
                </ol>

            </li>
        </ul>

        
        <h2>v0.5.10 - Release notes 2021-06-23</h2>
        <ul>
            <li>Fixed <a href="https://github.com/PharmaLedger-IMI/acdc-workspace/issues/9">https://github.com/PharmaLedger-IMI/acdc-workspace/issues/9</a>
                in <img src="assets/images/patient.png" style="height: 1em;"><a href="/leaflet-wallet/loader/" target="_blank">Patient Wallet</a>
                to avoid freezing in Safari without location permition.</li>
        </ul>

        <h2>v0.5.9 - Release notes 2021-06-17</h2>

        <ul>
            <li>Pré-provisioned data matrixes to scan with the <img src="assets/images/patient.png" style="height: 1em;"><a href="/leaflet-wallet/loader/" target="_blank">Patient Wallet</a>,

                <ul>
                    <li>
                        <strong style="color: red;">Important:</strong> For the scan to be caught in the <img src="assets/images/pharmacy.png" style="height: 1em;"><a href="/backoffice" target="_blank">ACDC Demo</a>
                        it is necessary to enable the permissions in <strong>Patient Wallet Settings</strong> <i>(menu icon in the left corner)</i> <strong>> Setup Anti-Counterfeiting Integration</strong> option.
                        <ul>
                            <li><i>Enable Anti-Counterfeit Validation?</i> <strong>Yes</strong></li>
                            <li><i>Share de-identified marker for Anti-Counterfeiting purposes?</i> <strong>Yes</strong></li>
                            <li><i>Share location when scanning for Anti-Counterfeiting purposes?</i> <strong>Yes</strong></li>
                        </ul>
                    </li>
                </ul>
                <p></p>
                <ul>
                    <li><strong>Cosentyx</strong>, Novartis, GTIN 02113100000011, Batch MAY1701, Expiry: 2022-Apr-30<br />
                        <img src="assets/images/2d-matrix/Cosentyx-02113100000011-MAY1701.png">
                    </li>
                </ul>

                <ul>
                    <li><strong>Keytruda</strong>, MSD, GTIN 01133111111118, Batch MAY1702, Expiry: 2022-Apr-30<br />
                        <img src="assets/images/2d-matrix/Keytruda-01133111111118-MAY1702.png">
                    </li>
                </ul>

                <ul>
                    <li><strong>Fluarix</strong>, GSK, GTIN 01183111111137, Batch MAY1703, Expiry: 2022-Apr-30<br />
                        <img src="assets/images/2d-matrix/Fluarix-01183111111137-MAY1703.png">
                    </li>
                </ul>
            </li>
            <li>
                <h3><img src="assets/images/pharmacy.png" style="height: 1em;"><a href="/backoffice" target="_blank">ACDC Demo</a></h3>
                <ol>
                    <li>Added responsive support for smaller devices.</li>
                    <li>Added new properties to scan events.</li>
                    <li>Improvement of functional, visible, and clickable elements.</li>
                    <li>Fixed session expiration issue to redirect to /login correctly.</li>
                    <li>Fixed some issues on event map visualization.</li>
                    <li>Added export scans option.</li>
                    <li>
                        Changed the users who can log in to the application:
                        <ul>
                            <u>
                                <li>admin@somecompany.com</li>
                                <li>username@somecompany.com</li>
                            </u>
                            <li>password: <span style="font-weight: bold;">123456</span></li>
                        </ul>
                    </li>
                </ol>
            </li>
        </ul>

        <ul>
            <li>Please use <span style="font-weight: bold;">Incognito mode</span> to run the Enterprise Wallet or Patient Wallet (to ensure that you are running the latest).</li>
        </ul>

        <h2>v0.3.0 - Release notes 2021-05-20</h2>

        <p>Application description / testing instructions</p>
        <ul>
            <li>To test the feedback on <img src="assets/images/pharmacy.png" style="height: 1em;"><a href="/backoffice" target="_blank">ACDC Demo</a>,
                <ol>
                    <li>Log in with your email address as username (use lower-case), and password 123456
                        <span style="font-size: x-small;">(there are no features to sign-up or reset your password yet.)</span>
                    </li>
                    <li>Choose menu entry <span style="font-weight: bold;">Scan Data &gt; Events</span>.</li>
                    <li>There are events with dates between 2021-May-19 and May-20.</li>
                    <li><span style="font-weight: bold;">WARNING:</span> When displaying more that 500 events at one time, your browser may slow down.
                        <span style="font-size: x-small;">(the actual limit depends on your browser and network speed,
                            so reharse up to what point you can increase.)</span>
                    </li>
                </ol>
            </li>
        </ul>        

        <h2>v0.2.0 - Release notes 2021-05-06</h2>

        <p><span style="font-weight: bold;">WARNING:</span> Unstable software and environments. Use at your own risk! Data persistence at risk of un-expected reset!</p>

        <p>Application description / testing instructions</p>
        <ul>
            <li><img src="assets/images/factory.png" style="height: 1em;"> Enterprise Wallet App (for MAH users):
                <ol>
                    <li>On the first usage, you need to register a username password to open the wallet. (Re-used from ePi)</li>
                    <li>(See ePi instructions...)</li>
                </ol>
            </li>
            <li><img src="assets/images/patient.png" style="height: 1em;"> Patient Wallet App:
                <ol>
                    <li>On the first usage, you need to register a username password to open the wallet. (Re-used from ePi)</li>
                    <li>(See ePi instructions...)</li>
                </ol>
            </li>
            <li><img src="assets/images/pharmacy.png" style="height: 1em;"> Backoffice Centralized Application (one for each MAH):
                <ol>
                    <li>Login with a user .....@pdmfc.com , and access the menu "Scan-Data", "Event". Filter what events are needed, and display them on the "Map".</li>
                </ol>
            </li>
            <li><img src="assets/images/data-center--v2.png" style="height: 1em;"> Backoffice Centralized REST Services (one for each MAH):
                <ol>
                    <li><a href="/borest/api">OpenAPI</a>  description/test page.
                        <br />Relevant services:
                        <ul>
                            <li><a href="/borest/api/#/Scan/ScanController_create">/borest/scan</a> upload one scan event data (public access)</li>
                            <li><a href="/borest/api/#/Event/EventController_findAll">/borest/acdc/event</a> download all event data (authenticated access - please ask pharmaledger dot team at pdmfc dot com for an account).</li>
                        </ul>
                    </li>
                </ol>
            </li>
            <li><img src="assets/images/cube.png" style="height: 1em;"> DSU Explorer - debug tool to explore DSUs anchored on the blockchain (Re-used from ePi).</li>
        </ul>
        Wallets do not communicate yet, so nothing done on one wallet is visible on other wallets.

        <p>Milestones achieved on this release, compared to the plan ....docx:</p>
        <ul>
            <li>M1 OpenDSU Solution Concept Complete - using ePi unchanged - work in progress.</li>
            <li>M2 Development Environment Setup Complete - complete 100% - development environment available at <a href="https://acdc-dev.pharmaledger.pdmfc.com/">https://acdc-dev.pharmaledger.pdmfc.com/</a>.</li>
            <li>M3 Business Test Environment Setup Complete - complete 100% - environment available at <a href="https://acdc.pharmaledger.pdmfc.com/">https://acdc.pharmaledger.pdmfc.com/</a>.</li>
            <li>M4 ACDC Backoffice Web Application Concet Setup - REST service to upload and download scan events available for experimentation.</li>
        </ul>

        <p>PDM welcomes technical contributions at <a href="https://github.com/PharmaLedger-IMI/ctr-workspace">https://github.com/PharmaLedger-IMI/acdc-workspace</a></p>
    </div>


    <script type="application/javascript">

        const displayCredentials = function(credentials){

            const getProvider = function(name, ssi){
                return `
<tr>
    <td style="border-style: solid;">${name}</td>
    <td style="border-style: solid;">${ssi}</td>
</tr>`
            }
            const getHeader = function(){
                return `
<tr>
    <th>Provider</th>
    <th>KeySSI</th>
</tr>
`;
            }

            document.getElementById('credentials-table').innerHTML = `\
            ${getHeader()}
            ${Object.keys(credentials).map(key => getProvider(key, credentials[key])).join('\n')}
            `
            document.getElementById('credentials').style.display = "block";


        }

        const getCredentials = function(){
            const credentialsFile = new XMLHttpRequest();
            credentialsFile.open("GET", './auth-features.json', true);
            credentialsFile.send();
            credentialsFile.onreadystatechange = function() {
                if (credentialsFile.readyState === 4 && credentialsFile.status === 200)
                    displayCredentials(JSON.parse(credentialsFile.responseText));
            }
        }

        getCredentials();
    </script>

    <footer>
        <img src="assets/images/eu-h337.png" alt="EU" align="left" style="height: 6em; margin: 0.5em;">
        <br>
        This project has received funding from the European Union’s Horizon 2020 research and innovation programme under grant agreement No 853992
        <br>&nbsp;<br>
        v<!-- VERSION_START -->0.5.12-g4425c64<!-- VERSION_END --> &copy;&nbsp;2021 <a href="http://pharmaledger.eu">Pharmaledger.eu</a> - All Rights Reserved. 
    </footer>
</body>

</html>
